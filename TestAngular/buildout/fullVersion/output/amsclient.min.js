!function(){"use strict";angular.module("testApp",[]),angular.module("testApp",["ngSanitize","ngAnimate","ngMessages","ui.router","ui.bootstrap","common"])}(),function(){"use strict";PNotify.prototype.options.styling="bootstrap3",PNotify.prototype.options.delay=3e3,PNotify.prototype.options.nonblock=!0,PNotify.prototype.options.history=!1,PNotify.prototype.options.type="info";var a=angular.module("testApp"),b={docTitle:"Test APP: ",baseServiceUrl:"api"};a.value("config",b),a.config(["$httpProvider","$locationProvider",function(a,b){a.defaults.withCredentials=!0,a.interceptors.push("authInterceptorService")}]),a.config(["$compileProvider","$logProvider",function(a,b){a.debugInfoEnabled(!1),b.debugEnabled(!1)}]),a.factory("authInterceptorService",["$q","$injector","common.notify",function(a,b,c){var d={},e=function(d){return 401===d.status?(c.open({title:"Authentication Failed:",text:"User is not logged in, redirecting to Login page",type:"error",nonblock:!1,width:"40%"}),b.get("$state").go("login",{},{reload:!0})):403===d.status?(c.open({title:"Authorization Failed:",text:"User is not entitle to content.",type:"error",nonblock:!1,width:"40%"}),b.get("$state").go("test.unauthorized",{},{reload:!0})):c.open({title:"An error occurred:",text:d.data.errorMessage,type:"error",nonblock:!1,width:"40%"}),a.reject(d)};return d.responseError=e,d}])}(),function(){"use strict";var a=angular.module("testApp");a.config(["$stateProvider","$urlRouterProvider","$locationProvider",function(a,b,c){a.state("test",{url:"/",views:{navContainerView:{templateUrl:"app/layout/topnav.html"}},data:{title:"Home",role:"testUser"},resolve:{userSession:["test.user.userService",function(a){return a.isAuthenticated(this.name).then(function(){return!0})}]}}),a.state("login",{url:"/login",views:{mainContainerView:{templateUrl:"app/account/partials/login.html"}},data:{title:"Login"},authenticate:!1}),a.state("test.unauthorized",{url:"unauthorized",views:{"mainContainerView@":{templateUrl:"app/error.html"}},data:{title:"Unauthorized Access"},authenticate:!0}),b.otherwise("/")}]),a.run(["$rootScope","$state",function(a,b){a.$on("$stateChangeStart",function(a,c,d){"/"===c.url&&(b.go("login"),a.preventDefault())}),a.$on("$stateChangeError",function(a,c,d,e,f,g){"AuthenticationRequired"===g.name&&(userService.setNextState(c.name,"You must login to access this page"),b.go("login",{},{reload:!0}))}),a.$on("$stateChangeSuccess",function(c,d,e,f,g){angular.isDefined(d.data.role)&&!userService.hasRole(d.data.role)&&b.go("test.unauthorized",{},{reload:!0}),angular.isDefined(d.data.title)&&(a.title="test 2.0 -- ".concat(d.data.title))})}])}(),function(){"use strict";angular.module("testApp").factory("$exceptionHandler",["common.notify","common.factories.log",function(a,b){return function(c){b.error(c),a.open({title:"An error occurred:",text:c.toString(),type:"error",nonblock:!1,width:"40%"})}}])}(),function(){"use strict";function a(a){function b(b){return a.baseServiceUrl.concat("/"+b)}function c(a,b,c){for(var d=0;d<a.length;d+=1)if(a[d][c]===b)return a[d]}function d(a){return a.reduce(function(a,b){return a.indexOf(b)<0&&a.push(b),a},[])}var e={constructUrl:b,getItemByKeyOfDictionary:c,getUniqueArray:d};return e}var b=angular.module("common",[]);b.provider("commonConfig",function(){this.config={},this.$get=function(){return{config:this.config}}}),b.factory("common",["config",a])}(),function(){"use strict";angular.module("common").factory("common.helper",[function(){function a(b,c){if(0!==Object.getOwnPropertyNames(b).length){for(var d in c){var e=c[d];angular.isDefined(b[e])&&delete b[e]}for(var f in b)b.hasOwnProperty(f)&&null!==b[f]&&"object"==typeof b[f]&&a(b[f],c)}}var b,c=function(a){var b,c,d;return b=a.options,d=a.searchFilters,c={Take:b.data.take,Skip:b.data.skip,Filter:void 0,Sort:void 0,Group:b.data.group},angular.isDefined(b.data.sort)&&null!==b.data.sort&&(c.Sort=b.data.sort),angular.isDefined(d)&&null!==d?angular.isDefined(b.data.filter)&&null!==b.data.filter?(b.data.filter.filters=b.data.filter.filters.concat(d),c.Filter=b.data.filter):d.length>0&&(c.Filter={logic:"and",filters:d}):c.Filter=b.data.filter,c},d=function(b){var c=JSON.parse(JSON.stringify(b.data));return a(b.data,b.keyToRemove),c},e=function(a){if(0!==Object.getOwnPropertyNames(a).length)for(var b in a)a.hasOwnProperty(b)&&("object"==typeof a[b]?(e(a[b],keyToRemove),0===Object.getOwnPropertyNames(a[b]).length&&delete a[b]):(null===b||angular.isUndefined(b))&&delete a[b])};return b={generateSearchParams:c,deleteUnwantedPostData:d,removeNulls:e}}])}(),function(){"use strict";angular.module("common").factory("common.factories.log",["$log",function(a){var b={},c=function(){a.debug.apply(a,arguments)},d=function(){a.error.apply(a,arguments)},e=function(){a.info.apply(a,arguments)},f=function(){a.log.apply(a,arguments)},g=function(){a.warn.apply(a,arguments)},h=function(){var c=arguments.length>0?arguments[0]:null,d=arguments.length>1?Array.prototype.slice.call(arguments,1):[];if(!c)throw new Error("timerName is not specified");var e=new Date,f=b[c]?"[Timer:"+c+" reset] ":"[Timer:"+c+" set] ";d.unshift(f),b[c]=e,a.debug.apply(a,d)},i=function(){var c=arguments.length>0?arguments[0]:null,d=arguments.length>1?Array.prototype.slice.call(arguments,1):[];if(!c)throw new Error("timerName is not specified");var e=b[c]?"[Timer:"+c+" execution: "+(new Date-b[c])/1e3+"ms] ":"[Timer:"+c+" not exists] ";d.unshift(e),delete b[c],a.debug.apply(a,d)};return{debug:c,error:d,info:e,log:f,warn:g,setTimer:h,clearTimer:i}}])}(),function(){"use strict";angular.module("common").factory("common.notify",[function(){var a=function(a){var b=new PNotify(a);return b},b=function(a){a&&a.pnotify_remove&&a.pnotify_remove()},c=function(){$.pnotify_remove_all()};return{open:a,close:b,closeAll:c}}])}(),function(){"use strict";angular.module("common").factory("common.factories.webApi",["$http","$q","common.factories.log",function(a,b,c){var d=function(a){var b={webApiMarker:!0};return angular.isString(a)?(b.method="GET",b.url=a):(b.method=a.method||"GET",b.url=a.url,b.params=a.params,b.data=a.data,b.headers=a.headers,b.timeout=a.timeout,b.cache=a.cache,b.responseType=a.responseType,angular.isDefined(a.transformRequest)&&(b.transformRequest=a.transformRequest)),b},e=function(a,b,c,d,e){var f=e.data?JSON.stringify(e.data):"empty";return"[WebApi:"+c+" "+a/1e3+"sec]: "+e.url+" data:"+f+", "+(b&&b.length?b.length+" items returned ":"object returned ")},f=function(f){var g=d(f),h=b.defer(),i=new Date;return a.defaults.headers.common["X-Xsrf-Token"]=localStorage.getItem("CsrfToken"),a(g).success(function(a,b,d,f){c.debug(e(new Date-i,a,b,d,f)),h.resolve(a)}).error(function(a,b,c,d){h.reject(a)}),h.promise};return{call:f}}])}();